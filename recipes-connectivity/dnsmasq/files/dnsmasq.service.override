[Unit]
After=network.target sys-subsystem-net-devices-wlan0.device
Wants=network.target sys-subsystem-net-devices-wlan0.device

[Service]
ExecStartPre=/bin/sh -c 'for i in $(seq 1 20); do [ -d /sys/class/net/wlan0 ] && exit 0; echo "waiting for wlan0..."; sleep 1; done; echo "wlan0 not ready"; exit 1'
Restart=on-failure
RestartSec=3